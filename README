Sphinx æ˜¯ä¸€ä¸ªåŸºäº Python çš„æ–‡æ¡£ç”Ÿæˆå·¥å…·ã€‚
æœ€æ—©ç”± Python å®˜æ–¹ç¤¾åŒºåˆ›å»ºï¼Œç”¨äºç»´æŠ¤ Python å®˜æ–¹æ–‡æ¡£
ç°åœ¨è¢«å¹¿æ³›ç”¨äºå„ç§é¡¹ç›®ï¼ˆåŒ…æ‹¬ NumPyã€Pandasã€PyTorchï¼‰ã€‚

NumPy é£æ ¼ï¼ˆå¾ˆå¤šç§‘å­¦åº“ç”¨è¿™ä¸ªæ ¼å¼ï¼‰ æ­¤å¤–è¿˜æœ‰è°·æ­Œé£æ ¼ï¼ˆGoogle Styleï¼‰
ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ NumPy é£æ ¼ docstring ç¤ºä¾‹ï¼š
def add(a, b):
    """
    è®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„å’Œã€‚

    Parameters
    ----------
    a : int
        ç¬¬ä¸€ä¸ªæ•´æ•°ã€‚
    b : int
        ç¬¬äºŒä¸ªæ•´æ•°ã€‚

    Returns
    -------
    int
        ä¸¤æ•°ä¹‹å’Œã€‚
    """
    return a + b

ä¾‹å­ï¼šç”Ÿæˆé—®å€™è¯­çš„å‡½æ•°
def generate_greeting(personal, family, title=None, polite=True):
    """
    Generate a greeting string for a person.

    Parameters
    ----------
    personal : str
        A given name, such as Will or Jean-Luc
    family : str
        A family name, such as Riker or Picard
    title : str
        An optional title, such as Captain or Reverend
    polite : bool
        True for a formal greeting, False for informal.

    Returns
    -------
    string
        An appropriate greeting.
    """
    if polite:
        return f"Good day, {title} {family}."
    else:
        return f"Hi {personal}!"

è€å¸ˆæåˆ°ï¼š
â€œæˆ‘ä»¬ä½¿ç”¨ NumPy é£æ ¼çš„ docstring å¹¶å¯ç”¨ numpydoc Sphinx æ‰©å±•ã€‚â€
æ„æ€æ˜¯ï¼š Sphinx é»˜è®¤ä¸è¯†åˆ«è¿™ç§æ ¼å¼ï¼›
ä½ éœ€è¦åœ¨ conf.pyï¼ˆSphinx é…ç½®æ–‡ä»¶ï¼‰é‡ŒåŠ ä¸Šï¼š
extensions = [
    'numpydoc',
]
è¿™æ ·å®ƒæ‰èƒ½æ­£ç¡®è§£æ Parametersã€Returns è¿™æ ·çš„æ®µè½æ ‡é¢˜ã€‚

ğŸ§© äºŒã€å‘½ä»¤åˆ†æ­¥è§£é‡Š
âœ… Step 1ï¼šå®‰è£… Sphinx
pip install sphinx
å®‰è£… Sphinx å·¥å…·ï¼ˆå»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼‰ã€‚
å¦‚æœè¦æ”¯æŒ NumPy é£æ ¼çš„æ–‡æ¡£ï¼Œè¿˜è¦å®‰è£…ï¼š
pip install numpydoc

âœ… Step 2ï¼šåˆå§‹åŒ–é¡¹ç›®
sphinx-quickstart
è¿™æ¡å‘½ä»¤æ˜¯ Sphinx çš„â€œå¿«é€Ÿå¯åŠ¨å‘å¯¼â€ï¼Œä¼šé—®ä½ ä¸€ç³»åˆ—é—®é¢˜ï¼Œç”¨æ¥è‡ªåŠ¨ç”Ÿæˆé…ç½®ã€‚

âœ… Step 3ï¼šå›ç­”å‘½ä»¤è¡Œä¸­çš„é—®é¢˜
Sphinx ä¼šä¸€é¡¹ä¸€é¡¹åœ°é—®ä½ ï¼š
é—®é¢˜	å«ä¹‰	å»ºè®®ç­”æ¡ˆ
Separate source and build directories (y/n)	æ˜¯å¦å°†æºç å’Œç”Ÿæˆæ–‡ä»¶åˆ†å¼€	è¾“å…¥ yï¼ˆæ¨èï¼‰
Project name	                            é¡¹ç›®å	    æ¯”å¦‚ Greetings
Author name(s)	                            ä½œè€…	    ä½ çš„åå­—
Project release	                            ç‰ˆæœ¬å·	    ä¾‹å¦‚ 0.1
Project language	                        æ–‡æ¡£è¯­è¨€	 en æˆ– zh_CN
Do you want to use the epub builder (y/n)	æ˜¯å¦ç”Ÿæˆ epub æ ¼å¼ï¼ˆç”µå­ä¹¦ï¼‰æ–‡æ¡£ï¼Œè¾“å…¥ n å°±å¥½
autodoc, doctest, intersphinx, todo, coverage, 
mathjax, ifconfig, viewcode, githubpages	æ˜¯å¦å¯ç”¨è¿™äº›æ‰©å±•ï¼ˆä¸€èˆ¬å¯ä»¥æŒ‰å›è½¦è·³è¿‡ï¼Œæˆ–ä¹‹åå†æ”¹ï¼‰

ğŸ§± è¿è¡Œå®Œä¹‹åï¼Œå®ƒä¼šå¸®ä½ è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç›®å½•ç»“æ„ï¼š
æ¯”å¦‚ä½ è¾“å…¥äº† y åˆ†å¼€æºä»£ç å’Œæ„å»ºç›®å½•ï¼Œä¼šç”Ÿæˆï¼š
docs/
â”œâ”€â”€ build/         â† å­˜æ”¾ç”Ÿæˆåçš„ HTMLã€PDF ç­‰
â”œâ”€â”€ source/        â† å­˜æ”¾æ–‡æ¡£æºæ–‡ä»¶
â”‚   â”œâ”€â”€ conf.py    â† é…ç½®æ–‡ä»¶ï¼ˆå¯ç”¨ numpydoc ç­‰æ‰©å±•ï¼‰
â”‚   â”œâ”€â”€ index.rst  â† æ–‡æ¡£é¦–é¡µ
â”‚   â””â”€â”€ _static/   â† å›¾ç‰‡ã€æ ·å¼æ–‡ä»¶
â””â”€â”€ Makefile       â† æ„å»ºå‘½ä»¤

âœ… Step 4ï¼šç”Ÿæˆçš„æ–‡ä»¶è¯´æ˜
Sphinx ä¼šè¾“å‡ºï¼š
Creating file ./conf.py.
Creating file ./index.rst.
Creating file ./Makefile.
Creating file ./make.bat.
è¿™äº›æ–‡ä»¶çš„å«ä¹‰å¦‚ä¸‹ï¼š
æ–‡ä»¶	              ä½œç”¨ 
conf.py	            ğŸŒŸæœ€é‡è¦çš„é…ç½®æ–‡ä»¶ï¼ˆå‘Šè¯‰ Sphinx å»å“ªé‡Œæ‰¾ä»£ç ã€ç”¨å“ªäº›æ‰©å±•ï¼‰
index.rst	         ä½ çš„â€œæ–‡æ¡£ä¸»é¡µâ€ï¼Œåé¢ä½ ä¼šåœ¨è¿™é‡Œå†™ç›®å½•ç»“æ„
Makefile / make.bat	 æ–¹ä¾¿ä½ åœ¨å‘½ä»¤è¡Œé‡Œè¾“å…¥ make html æ¥ç”Ÿæˆç½‘é¡µ
_build/	Sphinx       ç”Ÿæˆçš„è¾“å‡ºæ–‡ä»¶ä¼šæ”¾åœ¨è¿™é‡Œï¼ˆå¦‚ HTMLï¼‰

ğŸ§  ä¸‰ã€å…³é”®æ–‡ä»¶ conf.py çš„ä½œç”¨
Sphinx çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶æ˜¯ï¼šconf.py
å®ƒç”¨ Python å†™æˆï¼Œå› ä¸º Sphinx æœ¬èº«æ˜¯ Python ç¨‹åºã€‚
é‡Œé¢åŒ…å«é¡¹ç›®çš„æ‰€æœ‰è®¾ç½®ï¼Œæ¯”å¦‚ï¼š
ğŸ”¹1. å‘Šè¯‰ Sphinx å“ªé‡Œèƒ½æ‰¾åˆ°ä½ çš„ Python æ¨¡å—
import sys
import os
sys.path.insert(0, os.path.abspath('.'))
è¿™ä¸¤è¡Œçš„æ„æ€æ˜¯ï¼š
æŠŠå½“å‰ç›®å½•ï¼ˆä½ çš„ Python æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼‰åŠ å…¥åˆ° Python æœç´¢è·¯å¾„ä¸­ã€‚
å¦åˆ™ Sphinx æ‰¾ä¸åˆ°ä½ çš„æ¨¡å—ï¼Œå°±æ²¡æ³•è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ã€‚

ğŸ”¹2. å¯ç”¨æ–‡æ¡£æ‰©å±•åŠŸèƒ½
extensions = [
    'sphinx.ext.autodoc',   # è‡ªåŠ¨ä»ä»£ç  docstring æå–æ–‡æ¡£
    'sphinx.ext.coverage',  # æ£€æŸ¥å‡½æ•°æ˜¯å¦éƒ½æœ‰æ–‡æ¡£
    'sphinx.ext.mathjax',   # æ”¯æŒæ•°å­¦å…¬å¼
    'sphinx.ext.viewcode',  # åœ¨æ–‡æ¡£ä¸­æ·»åŠ â€œæŸ¥çœ‹æºä»£ç â€é“¾æ¥
    'numpydoc'              # æ”¯æŒ NumPy é£æ ¼ docstring
]
è¿™äº›æ‰©å±•ç›¸å½“äºâ€œæ’ä»¶â€ï¼š
autodoc â†’ è‡ªåŠ¨ä»ä½ çš„ Python æ–‡ä»¶æå– docstring
numpydoc â†’ è¯†åˆ«è€å¸ˆæ•™çš„é‚£ç§ Parameters / Returns é£æ ¼
viewcode â†’ å¯ä»¥åœ¨ç½‘é¡µé‡Œç‚¹å‡»æŸ¥çœ‹æºä»£ç 

ğŸ”¹3. ä¸»é¢˜å’Œæ˜¾ç¤ºæ ·å¼
html_theme = 'alabaster'
ç½‘é¡µå¤–è§‚ä¸»é¢˜ï¼Œå¯ä»¥æ¢æˆ 'sphinx_rtd_theme'ï¼ˆæ›´å¸¸è§çš„é£æ ¼ï¼ŒReadTheDocsé£æ ¼ï¼‰ã€‚

ğŸ”¹4. é¡¹ç›®ä¿¡æ¯
project = 'Greetings'
copyright = '2014, James Hetherington'
version = '0.1'
release = '0.1'
è¿™äº›ä¿¡æ¯ä¼šæ˜¾ç¤ºåœ¨æ–‡æ¡£é¡µè„šã€‚


ğŸ§± å››ã€ä¹‹åæ€ä¹ˆç”Ÿæˆç½‘é¡µæ–‡æ¡£ï¼Ÿ
ä¸€æ—¦ä½ æœ‰äº†ï¼š
conf.py
index.rst
ä»¥åŠä¸€ä¸ª Python æ¨¡å—ï¼ˆæ¯”å¦‚ greeter.pyï¼‰
ä½ å°±å¯ä»¥è¿è¡Œï¼š
make html
ç„¶åï¼šè¾“å‡ºä¼šä¿å­˜åœ¨ _build/html/index.html
æ‰“å¼€å®ƒï¼Œä½ å°±èƒ½çœ‹åˆ°ä½ çš„ docstring è¢«å˜æˆäº†ç»“æ„åŒ–ç½‘é¡µâœ¨

ğŸ§© ä¸€å¥è¯æ€»ç»“ï¼š
doctest æ˜¯ä¸€ä¸ª Python å†…ç½®æ¨¡å—ï¼Œç”¨æ¥è‡ªåŠ¨æµ‹è¯•æ–‡æ¡£ï¼ˆdocstringï¼‰ä¸­çš„ç¤ºä¾‹ä»£ç æ˜¯å¦æ­£ç¡®è¿è¡Œã€è¾“å‡ºæ˜¯å¦åŒ¹é…ã€‚

ğŸ§  åœºæ™¯èƒŒæ™¯ï¼š
æˆ‘ä»¬å†™çš„å‡½æ•° docstring é‡Œç»å¸¸æ”¾ç¤ºä¾‹ä»£ç ï¼Œä¾‹å¦‚ï¼š
def greet(personal, family, title="", polite=False):
    """
    Examples
    --------
    >>> greet("Terry", "Jones")
    'Hey, Terry Jones.'
    """
è¿™æ˜¯ä¸€ç§â€œæ•™å­¦å¼â€çš„æ–‡æ¡£å†™æ³• â€”â€” ç”¨æˆ·çœ‹äº†æ–‡æ¡£å°±çŸ¥é“å‡½æ•°æ€ä¹ˆç”¨ã€‚
ä½†æ˜¯é—®é¢˜æ¥äº†ï¼š
ğŸ‘‰ å¦‚æœä½ æ”¹äº†ä»£ç é€»è¾‘ï¼Œå´å¿˜äº†æ”¹æ–‡æ¡£é‡Œçš„ç¤ºä¾‹æ€ä¹ˆåŠï¼Ÿ
ğŸ‘‰ é‚£ä½ çš„æ–‡æ¡£å°±â€œè¯´è°â€äº† ğŸ˜…ã€‚
äºæ˜¯ Python æä¾›äº† doctest æ¨¡å—ï¼Œè‡ªåŠ¨å¸®ä½ æ£€æµ‹è¿™äº›ä¾‹å­æ˜¯ä¸æ˜¯çœŸçš„è·‘å¾—é€šã€‚

ğŸ” çœ‹ä½ çš„ç¤ºä¾‹ï¼š
def greet(personal, family, title="", polite=False):
    """ Generate a greeting string for a person.

    Examples
    --------
    >>> from greetings.greeter import greet
    >>> greet("Terry", "Jones")
    'Hey, Terry Jones.
    """
æ³¨æ„ï¼è¿™è¡Œå°‘äº†ä¸€ä¸ªå¼•å· 'Hey, Terry Jones.
æ­£ç¡®çš„å†™æ³•åº”è¯¥æ˜¯ 'Hey, Terry Jones.'

äºæ˜¯å½“ä½ è¿è¡Œï¼š
python -m doctest greetings/greetings/greeter.py
å®ƒå°±ä¼šè¾“å‡ºï¼š
**********************************************************************
File ".../greeter.py", line 23, in greeter.greet
Failed example:
    greet("Terry", "Jones")
Expected:
    'Hey, Terry Jones.
Got:
    'Hey, Terry Jones.'
**********************************************************************
***Test Failed*** 1 failures.
è¿™è¯´æ˜ doctest åœ¨å¸®ä½ æŒ‡å‡ºæ–‡æ¡£é‡Œâ€œé”™è¯¯çš„è¾“å‡ºç¤ºä¾‹â€ï¼

ğŸ§° å¦å¤–ä¸€ç§ç”¨æ³•ï¼ˆç”¨ pytest æ¥è·‘ doctestï¼‰ï¼š
ä½ å¯ä»¥ç›´æ¥ç”¨ pytest æ¥è¿è¡Œæ‰€æœ‰æ¨¡å—é‡Œçš„ doctestï¼š
pytest --doctest-modules
è¿™ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼š
æ‰€æœ‰ .py æ–‡ä»¶çš„ docstring ä¸­çš„ç¤ºä¾‹ï¼›
å¹¶ä¸”æŠ¥å‘Šæµ‹è¯•ç»“æœï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰ã€‚